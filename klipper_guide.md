# Klipper Installation guide
"Klipper is a 3d-Printer firmware. It combines the power of a general purpose computer with one or more micro-controllers." - Klipper docs

Klipper is exceptionally powerful when compared to the stock firmware, which is based off Marlin. Klipper can step at rates much higher than Marlin can, and therefore allows for higher speeds if your printer isn't hardware limited. It also has pressure advance and input shaping, two features that improve print quality drastically. Klipper is quite well documented and is easy to use.

In the case of the Anycubic Kobra 2, switching to Klipper firmware will render the display useless, but most times you won't need it anyways because using Klipper means you'll get a powerful web interface and easy configuration of your printer. Installing Klipper will require a general purpose computer, which could be a Raspberry Pi, other single-board computers (SBC), or a linux device. This could be any old laptop you have lying around. 

Crororo_ has written an excellent [guide](https://crororo.blogspot.com/kobra2klipper) on this subject, although it is a little outdated. I still recommend following it however, but there are a couple of steps I have comments on. 
- He recommends the use of MainsailOS, but I prefer Raspbian Lite and KIAUH instead. MainsailOS is a little behind and it isn't easy to work with IMO. To install Klipper on a Raspberry Pi, install Raspbian Lite using the Raspberry Pi imager, and then install Klipper, Moonraker, and Fluidd/Mainsail using [KIAUH](https://github.com/dw-0/kiauh).
- Ignore the step ```nano src/hc32f460/Kconfig ``` and everything after until ```make menuconfig```. This is no longer required as of [#6269](https://github.com/Klipper3d/klipper/commit/4292136b16e2dcc60dca4cefda3a90065dcd0eca) (Aug 2023).
- Crororo_'s printer.cfg linked in the guide is a little outdated and has a bug. Mainly, the y offset for the probe is -13.35 instead of 13.35, which can result in bad first layers. Other changes include more reliable homing by increasing homing_retract_dist, adding pullups to switch runout and the default unused heatbed sensor pin to increase reliability, and adding the axis_twist_compensation module as default to allow for compensation of x axis twist resulting in poor first layers.

Once you've successfuly installed Klipper, there are a couple of modules that require calibration in Klipper. First off, [PID tune](https://www.klipper3d.org/G-Codes.html?h=pid_c#pid_calibrate) the hotend and the bed. Then, do z offset calibration by the [paper test](https://www.klipper3d.org/Probe_Calibrate.html#calibrating-probe-z-offset), and fine tune with first layer squares and babystepping. See [Andrew Ellis' Print Tuning Guide](https://ellis3dp.com/Print-Tuning-Guide/) for a more comprehensive printer tune. If first layers are inconsistent across the x axis, follow [this guide](https://www.klipper3d.org/Axis_Twist_Compensation.html) on how to compensate for the twist in the x axis rail with this module.